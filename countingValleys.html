<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Counting Valleys</title>
</head>
<body>

    <h1>Counting Valleys Challenge</h1>
    <script>
        // var arr = ['U','D','D','D','U','D','U','U'];
        // function countingValleys(s) {
        //     var valleyNumbers = 0;
        //     var prevStep = 0;
        //     var currentStep = 0;
        //     var n = s.length;
        //     for(var i = 0; i < n; i++) {
        //         if(arr[i] == 'D') {
        //             prevStep = currentStep;
        //             currentStep--;
        //         }
        //         else if(arr[i] == 'U') {
        //             prevStep = currentStep;
        //             currentStep++;
        //         }
        //         if(currentStep == 0 && prevStep == -1) {
        //             valleyNumbers++;
        //         }
        //     }
        //     return valleyNumbers;
        // }
        // document.write(countingValleys(arr));


        // var arr = ["U","D","D","D","U","D","U","U"];
        // function countingValleys(n, arr) {
        //     var mountainSteps = 0;
        //     var valleySteps = 0;
        //     var currentLevel = 0;
        //     var stepHistory = [];
        //     var n = arr.length;
        //     for (var i = 0; i < n; i++) {
        //         if (arr[i] === 'U') {
        //             mountainSteps++;
        //             currentLevel++;
        //             stepHistory.push(currentLevel);
        //         } else if (arr[i] === 'D') {
        //             valleySteps++;
        //             currentLevel--;
        //             stepHistory.push(currentLevel);
        //         }
        //     }
        //     var stepsAtSeaLevel = 0;
        //     for (var i = 0; i < stepHistory.length; i++) {
        //         if (stepHistory[i] === 0 && stepHistory[i - 1] < 0) {
        //             stepsAtSeaLevel++;
        //         }
        //     }
        //     return stepsAtSeaLevel;
        // }
        // document.write(countingValleys(8, arr));

        const s = ["U","D","D","D","U","D","U","U"];
        function countingValleys(n, s) {
            const min = 2;
            const max = 1000000;
            let isInValley = false;
            let valleys = 0;
            s = (typeof s === "string") ? s.split('') : s;
 
            if (s.length >= min
                && s.length <= max
                && n === parseInt(n, 0)
                && n >= min
                && n <= max 
                && n === s.length) {
          
                s.map(steps => ((steps === "U") ? 1 : -1))
                    .reduce((prev, next) => {
                        if (prev < 0 && !isInValley) {
                            isInValley = true;
                        }
                        if ((prev + next) === 0 && isInValley) {
                            valleys++;
                            isInValley = false;
                        }

                        return prev + next;    
                    });
            } 
     
            return valleys; 
        }
        document.write(countingValleys(8, s));
    </script>
</body>
</html>